
# **WebSocket Chat с Redis и Tornado**

Простой чат-приложение, использующее **WebSocket** для обмена сообщениями в реальном времени и **Redis PubSub** для доставки сообщений между клиентами. Разработан на **Python Tornado** с асинхронной обработкой.

---

## **Функционал**

1. **WebSocket-сервер**:
   - Обеспечивает двустороннее соединение с клиентами.
   - Управляет подключением и отключением клиентов.
   - Рассылает сообщения всем клиентам.

2. **Redis PubSub**:
   - Используется для передачи сообщений между клиентами через канал **`chat`**.

3. **Автоматическое отключение при простое**:
   - Сервер завершает работу после **5 минут** простоя (настраивается в конфигурации).

4. **Клиентский интерфейс**:
   - Простая веб-страница с полем ввода сообщений и отображением чата.

---

## **Технологии**

- **Python 3.10+**
- **Tornado**: асинхронный веб-фреймворк.
- **Redis**: брокер сообщений через PubSub.
- **HTML/CSS/JavaScript**: клиентский интерфейс для чата.

---

## **Установка и запуск**

### **1. Клонирование репозитория**
```bash
git clone https://github.com/ваш-аккаунт/websocket-redis-chat.git
cd websocket-redis-chat
```

### **2. Установка зависимостей**
Убедитесь, что у вас установлен **Python 3.10+** и **Redis**.

Установите зависимости:
```bash
pip install tornado redis
```

### **3. Запуск Redis**
Запустите Redis локально или через Docker:
```bash
docker run -p 6379:6379 redis
```

### **4. Запуск сервера**
Запустите сервер Tornado:
```bash
python server.py
```

После запуска в консоли отобразится:
```
Server started at http://localhost:8888
```

### **5. Запуск клиента**
Откройте браузер и перейдите по адресу:
```
http://localhost:8888
```

---

## **Использование**

1. Откройте несколько вкладок браузера и подключитесь к чату.
2. Введите сообщение в поле ввода и нажмите кнопку **"Отправить"**.
3. Сообщения будут отправляться всем подключённым клиентам в реальном времени.

---

## **Таймаут на простое**

Если сервер не получает сообщений или подключений в течение **5 минут**, он автоматически завершает работу.

Параметр таймаута можно изменить в файле `server.py`:
```python
IDLE_TIMEOUT = 300  # Таймаут в секундах (по умолчанию 5 минут)
```

---

## **Файловая структура**

```plaintext
websocket-redis-chat/
│
├── server.py          # Сервер на Tornado с WebSocket и Redis
├── index.html         # Клиентский интерфейс (Web GUI)
├── requirements.txt   # Зависимости проекта
└── README.md          # Документация проекта
```

---

## **Клиентский интерфейс**

Пример чата с простым и современным дизайном:

- Поле для ввода сообщений.
- Список подключённых пользователей (онлайн).
- Окно для отображения отправленных и полученных сообщений.

---

## **Пример взаимодействия**

1. **Подключение**:
   - При подключении отображается приветственное сообщение:
     ```
     Вы подключились к чату!
     ```

2. **Отправка сообщений**:
   - Ввод сообщения в поле отправки рассылает его всем пользователям.

3. **Отображение статуса**:
   - Количество пользователей онлайн отображается в реальном времени.

---

## **Пример запуска**

### Запуск сервера:
```bash
python server.py
```

### Запуск клиента:
1. Откройте браузер и перейдите по адресу:
   ```
   http://localhost:8888
   ```

2. Начните отправлять сообщения.

